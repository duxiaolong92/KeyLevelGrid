# ============================================
# KeyLevelGrid V3.0 æ¸è¿›å¼ä¸Šçº¿é…ç½®
# ============================================
# ç”¨é€”: æ¨¡æ‹Ÿç¯å¢ƒæµ‹è¯• V3.0 æ–°åŠŸèƒ½
# è¯´æ˜: æ­¤é…ç½®åœ¨æ­£å¼ä¸Šçº¿å‰ç”¨äºéªŒè¯ V3.0 åŠŸèƒ½
# ============================================

# åŸºç¡€é…ç½®
symbol: "BTCUSDT"
exchange: "gate"
mode: "staging"  # staging = æ¨¡æ‹Ÿç¯å¢ƒ, production = ç”Ÿäº§ç¯å¢ƒ

# ============================================
# ğŸ†• V3.0 åŠŸèƒ½å¼€å…³
# ============================================
v3_features:
  # ä¸»å¼€å…³: æ˜¯å¦å¯ç”¨ V3.0 æ°´ä½ç”Ÿæˆ
  level_generation_enabled: true
  
  # MTF æ•°æ®åŒæ­¥æ£€æŸ¥
  kline_sync_enabled: true
  
  # åŸå­æ€§é‡æ„æ‰§è¡Œå™¨
  atomic_rebuild_enabled: true
  
  # ä»…è¯„åˆ†åˆ·æ–°æ¨¡å¼ (ä¸é‡æ„è®¢å•)
  score_refresh_only: false
  
  # æ—¥å¿—è¯¦ç»†ç¨‹åº¦: DEBUG, INFO, WARNING
  log_level: "DEBUG"

# ============================================
# ç½‘æ ¼é…ç½®
# ============================================
grid:
  # åŸºç¡€å‚æ•°
  max_levels: 10                   # æœ€å¤§æ°´ä½æ•° (å½“ use_all_qualified = true æ—¶å¿½ç•¥)
  use_all_qualified: true          # ğŸ†• æ˜¯å¦ä½¿ç”¨æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„æ°´ä½
                                   # true: è¾¹ç•Œå†…æ‰€æœ‰æ»¡è¶³è¯„åˆ†çš„æ°´ä½éƒ½ä½œä¸ºç½‘æ ¼ (å¿½ç•¥ max_levels)
                                   # false: æŒ‰è¯„åˆ†æ’åºï¼Œåªå–å‰ max_levels ä¸ª
  min_profit_pct: 0.003            # æœ€å°åˆ©æ¶¦ 0.3%
  per_grid_amount: 100             # æ¯æ ¼é‡‘é¢ (USDT)
  
  # ğŸ†• V3.0 ç²¾åº¦é…ç½® (æ¶ˆé™¤ç¡¬ç¼–ç )
  precision:
    price_tolerance: 0.0001       # ä»·æ ¼åŒ¹é…å®¹å·® (0.01%)
    qty_tolerance: 0.05           # æ•°é‡åŒ¹é…å®¹å·® (5%)
    merge_tolerance: 0.002        # æ°´ä½åˆå¹¶å®¹å·® (0.2%)
    snap_tolerance: 0.005          # å¿ƒç†ä½å¸é™„å®¹å·® (0.5%)
  
  # ğŸ†• V3.0 æ°´ä½ç”Ÿæˆé…ç½®
  level_generation:
    enabled: true                 # æ˜¯å¦å¯ç”¨ V3.0 åŠ¨æ€æ°´ä½ç”Ÿæˆ
    
    # MTF æ—¶é—´æ¡†æ¶é…ç½®
    main_interval: "4h"           # ä¸»æ—¶é—´æ¡†æ¶ (æˆ˜ç•¥ä½)
    aux_intervals: ["1d", "1h"]  # è¾…åŠ©æ—¶é—´æ¡†æ¶
    
    # æ–æ³¢é‚£å¥‘å›æº¯å‘¨æœŸ (æ•°å€¼è¶Šå°ï¼Œè¯†åˆ«çš„åˆ†å½¢ç‚¹è¶Šå¤š)
    fibonacci_lookback: [5, 13, 34]  # çŸ­çº¿/ä¸­çº¿/é•¿çº¿ (è°ƒæ•´ä¸ºæ›´å¯†é›†)
    
    # è¯„åˆ†æƒé‡é…ç½®
    scoring:
      base_scores:                # åŸºç¡€åˆ†ï¼Œæ ¹æ®åˆ†å½¢ç‚¹æ¥æºå‘¨æœŸ
        "55x": 80                 # é•¿çº¿ (æˆ˜ç•¥çº§é˜²çº¿)
        "21x": 50                 # ä¸­çº¿ (æ ¸å¿ƒéœ‡è¡å¸¦)
        "8x": 20                  # çŸ­çº¿ (çµæ•åº¦é«˜)
      
      volume_weights:             # æˆäº¤é‡æƒé‡
        hvn: 1.3                  # é«˜æˆäº¤é‡èŠ‚ç‚¹
        lvn: 0.6                  # ä½æˆäº¤é‡èŠ‚ç‚¹ (çœŸç©ºåŒº)
        normal: 1.0               # æ™®é€šåŒºåŸŸ
      
      psychology_weight: 1.2      # å¿ƒç†ä½å¸é™„æƒé‡
      
      trend_coefficients:         # è¶‹åŠ¿ç³»æ•° (åŸºäº EMA éš§é“)
        bull_support: 1.2         # å¤šå¤´è¶‹åŠ¿ä¸‹æ”¯æ’‘ä½åŠ æˆ
        bull_resistance: 0.8      # å¤šå¤´è¶‹åŠ¿ä¸‹é˜»åŠ›ä½å‡æˆ
        bear_support: 0.8         # ç©ºå¤´è¶‹åŠ¿ä¸‹æ”¯æ’‘ä½å‡æˆ
        bear_resistance: 1.2      # ç©ºå¤´è¶‹åŠ¿ä¸‹é˜»åŠ›ä½åŠ æˆ
      
      mtf_resonance_coefficient: 1.5  # å¤šå‘¨æœŸå…±æŒ¯åŠ æˆç³»æ•°
      min_score_threshold: 30     # æ°´ä½æœ€ä½è¯„åˆ†é˜ˆå€¼ (ä½äºæ­¤åˆ†ä¸ç”Ÿæˆæ°´ä½)
      display_score_threshold: 20 # ğŸ†• æ˜¾ç¤ºè¿‡æ»¤é˜ˆå€¼ (ä½äºæ­¤åˆ†ä¸åœ¨ç•Œé¢æ˜¾ç¤ºï¼Œä½†ä»å‚ä¸è®¡ç®—)
      max_score: 100              # ğŸ†• ç™¾åˆ†åˆ¶å°é¡¶ (è¯„åˆ†ä¸Šé™ï¼Œè¶…è¿‡æ­¤å€¼çš„å°é¡¶ä¸ºæ­¤å€¼)
    
    # é‡æ„è§¦å‘é…ç½®
    rebuild_triggers:
      anchor_drift_threshold: 0.03  # é”šç‚¹ä»·æ ¼åç§»é˜ˆå€¼ (3%)
      cooldown_sec: 900             # é‡æ„å†·å´æ—¶é—´ (15 åˆ†é’Ÿ)
      coverage_alert_levels: 1      # å‰©ä½™ 1 æ ¼è§¦å‘è¦†ç›–å‘Šæ€¥
      daily_refresh_time: "00:00"   # æ¯æ—¥å®šæ—¶åˆ·æ–°æ—¶é—´
    
    # K çº¿åŒæ­¥é…ç½®
    kline_sync:
      enabled: true               # æ˜¯å¦å¯ç”¨ K çº¿åŒæ­¥æ£€æŸ¥
      max_desync_tolerance_sec: 60  # æœ€å¤§å…è®¸ K çº¿ä¸åŒæ­¥æ—¶é—´ (ç§’)
    
    # ğŸ†• æ‰‹åŠ¨ç½‘æ ¼è¾¹ç•Œé…ç½®
    # ç”¨é€”: å½“è‡ªåŠ¨åˆ†å½¢æå–çš„ç½‘æ ¼èŒƒå›´å¤ªçª„æ—¶ï¼Œæ‰‹åŠ¨æŒ‡å®šä¸Šä¸‹è¾¹ç•Œ
    # æ³¨æ„: å¯ç”¨åä¼šè¦†ç›–è‡ªåŠ¨è®¡ç®—çš„è¾¹ç•Œï¼Œä½†ä¸å½±å“æ°´ä½è¯„åˆ†
    manual_boundary:
      enabled: false               # æ˜¯å¦å¯ç”¨æ‰‹åŠ¨è¾¹ç•Œ
      upper_price: 100000.0       # æ‰‹åŠ¨ä¸Šè¾¹ç•Œ (é˜»åŠ›åŒºä¸Šé™)
      lower_price: 85000.0        # æ‰‹åŠ¨ä¸‹è¾¹ç•Œ (æ”¯æ’‘åŒºä¸‹é™)
      # è¾¹ç•Œæ¨¡å¼:
      #   "strict"  - ä¸¥æ ¼æ¨¡å¼ï¼Œè¶…å‡ºè¾¹ç•Œçš„æ°´ä½ç›´æ¥ä¸¢å¼ƒ
      #   "filter"  - è¿‡æ»¤æ¨¡å¼ï¼Œè¶…å‡ºè¾¹ç•Œçš„æ°´ä½é™ä½è¯„åˆ†ä½†ä¿ç•™
      #   "expand"  - æ‰©å±•æ¨¡å¼ï¼Œè‡ªåŠ¨è¾¹ç•Œä¸æ‰‹åŠ¨è¾¹ç•Œå–å¹¶é›†
      mode: "strict"
      # è¾¹ç•Œç¼“å†²: åœ¨è¾¹ç•Œå¤–å¢åŠ ç¼“å†²åŒº (ç™¾åˆ†æ¯”)
      buffer_pct: 0.01            # 1% ç¼“å†²åŒº

# ============================================
# æ¸è¿›å¼ä¸Šçº¿æ£€æŸ¥æ¸…å•
# ============================================
# 
# é˜¶æ®µ 1: æ¨¡æ‹Ÿç¯å¢ƒæµ‹è¯• (æœ¬é…ç½®)
# â–¡ éªŒè¯ LevelCalculator è¾“å‡º
# â–¡ éªŒè¯ MTFKlineFeed åŒæ­¥
# â–¡ éªŒè¯ AtomicRebuildExecutor äº‹åŠ¡æ€§
# â–¡ ç›‘æ§æ—¥å¿—æ—  ALARM å‘Šè­¦
# 
# é˜¶æ®µ 2: å°ä»“ä½å®ç›˜æµ‹è¯•
# â–¡ å°† per_grid_amount è®¾ä¸ºæœ€å°å€¼
# â–¡ å°† max_levels è®¾ä¸º 3-5
# â–¡ è¿è¡Œ 24-48 å°æ—¶è§‚å¯Ÿ
# 
# é˜¶æ®µ 3: æ­£å¼ä¸Šçº¿
# â–¡ æ¢å¤æ­£å¸¸ä»“ä½å¤§å°
# â–¡ å¼€å¯æ‰€æœ‰ V3.0 åŠŸèƒ½
# â–¡ æŒç»­ç›‘æ§ rebuild_logs
# ============================================

# ============================================
# å‘Šè­¦é…ç½®
# ============================================
alerts:
  telegram_enabled: true
  alarm_on_rebuild_fail: true
  alarm_on_sync_fail: true
  daily_summary_enabled: true

# ============================================
# æ—¥å¿—é…ç½®
# ============================================
logging:
  level: "DEBUG"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/v3_staging.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5
